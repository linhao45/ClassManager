{"remainingRequest":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_Project\\ClassManagerSys2\\src\\views\\tasks\\MyTasks.vue?vue&type=style&index=0&id=b8274912&lang=less&scoped=true&","dependencies":[{"path":"D:\\Vue_Project\\ClassManagerSys2\\src\\views\\tasks\\MyTasks.vue","mtime":1599466369703},{"path":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_Project\\ClassManagerSys2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZWwtdGFibGUgdGguZ3V0dGVyIHsNCiAgICBkaXNwbGF5OiB0YWJsZS1jZWxsICFpbXBvcnRhbnQ7DQp9DQouaW5mb1RhYmxlX2JveCB7DQogICAgbWFyZ2luOiBhdXRvOw0KICAgIHdpZHRoOiA2NTBweDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoubGluZSB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmJ0bnMgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsNCn0NCi5leHBhbmRUaXRsZSB7DQogICAgbGV0dGVyLXNwYWNpbmc6IDNweDsNCn0NCg=="},{"version":3,"sources":["MyTasks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyTasks.vue","sourceRoot":"src/views/tasks","sourcesContent":["<template>\r\n    <div>\r\n        <!-- 面包屑导航 -->\r\n        <el-breadcrumb>\r\n            <el-breadcrumb-item :to=\"{ path: '/mytasks' }\">我的发布</el-breadcrumb-item>\r\n            <el-breadcrumb-item>任务列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <!-- 添加任务对话框 -->\r\n        <div>\r\n            <el-dialog width=\"600px\" title=\"发布任务\" :visible.sync=\"addTaskDialogVisible\">\r\n                <el-form label-width=\"80px\" :model=\"addTaskForm\">\r\n                    <el-form-item label=\"活动任务\">\r\n                        <el-input v-model=\"addTaskForm.name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"开始时间\">\r\n                        <el-row>\r\n                            <el-col>\r\n                                <el-date-picker\r\n                                    type=\"daterange\"\r\n                                    unlink-panels\r\n                                    start-placeholder=\"开始日期\"\r\n                                    end-placeholder=\"结束日期\"\r\n                                    placeholder=\"请选择/输入日期\"\r\n                                    format=\"yyyy 年 MM 月 dd 日\"\r\n                                    value-format=\"yyyy-MM-dd\"\r\n                                    v-model=\"addTaskForm.time\"\r\n                                ></el-date-picker>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </el-form-item>\r\n                    <el-form-item class=\"btns\">\r\n                        <el-button type=\"primary\">发布</el-button>\r\n                        <el-button @click=\"changeAddTaskDialog\" type=\"info\">取消</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-dialog>\r\n        </div>\r\n\r\n        <!-- 修改任务对话框 -->\r\n        <div>\r\n            <el-dialog width=\"600px\" title=\"修改任务\" :visible.sync=\"editTaskDialogVisible\">\r\n                <el-form label-width=\"80px\" :model=\"editTaskForm\">\r\n                    <el-form-item label=\"活动任务\">\r\n                        <el-input v-model=\"editTaskForm.name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"开始时间\">\r\n                        <el-row>\r\n                            <el-col>\r\n                                <el-date-picker\r\n                                    type=\"daterange\"\r\n                                    unlink-panels\r\n                                    start-placeholder=\"开始日期\"\r\n                                    end-placeholder=\"结束日期\"\r\n                                    placeholder=\"请选择/输入日期\"\r\n                                    format=\"yyyy 年 MM 月 dd 日\"\r\n                                    value-format=\"yyyy-MM-dd\"\r\n                                    v-model=\"editTaskForm.time\"\r\n                                ></el-date-picker>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </el-form-item>\r\n                    <el-form-item class=\"btns\">\r\n                        <el-button type=\"primary\">修改</el-button>\r\n                        <el-button @click=\"editTaskDialogVisible = !editTaskDialogVisible;\" type=\"info\">取消</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-dialog>\r\n        </div>\r\n\r\n        <!-- 卡片视图 -->\r\n        <el-card>\r\n            <!-- 搜索与添加区域 -->\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"13\">\r\n                    <el-input placeholder=\"请输入搜索的内容\">\r\n                        <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\r\n                    </el-input>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-button @click=\"changeAddTaskDialog\" type=\"primary\">发布任务</el-button>\r\n                </el-col>\r\n            </el-row>\r\n            <el-table\r\n                :data=\"tasklist\"\r\n                border\r\n                stripe\r\n                @expand-change=\"expandSelect\"\r\n                :row-key=\"getRowKeys\"\r\n                :expand-row-keys=\"expandList\"\r\n            >\r\n                <!-- 展开栏 -->\r\n                <el-table-column type=\"expand\" align=\"center\" label=\"详情\" :resizable=\"false\">\r\n                    <template>\r\n                        <div class=\"infoTable_box\">\r\n                            <p class=\"expandTitle\">未提交名单</p>\r\n                            <el-table :data=\"unDoPeop\" width=\"500px\">\r\n                                <el-table-column align=\"center\" type=\"index\" label></el-table-column>\r\n                                <el-table-column align=\"center\" prop=\"id\" label=\"学号/证件号\"></el-table-column>\r\n                                <el-table-column align=\"center\" prop=\"name\" label=\"姓名\"></el-table-column>\r\n                            </el-table>\r\n                            <p class=\"expandTitle\" style=\"margin-top: 12px\">已提交名单</p>\r\n                            <el-table :data=\"DonePeop\" width=\"500px\">\r\n                                <el-table-column align=\"center\" type=\"index\" label></el-table-column>\r\n                                <el-table-column align=\"center\" prop=\"id\" label=\"学号/证件号\"></el-table-column>\r\n                                <el-table-column align=\"center\" prop=\"name\" label=\"姓名\"></el-table-column>\r\n                                <el-table-column align=\"center\" label=\"操作\">\r\n                                    <template v-slot=\"scope\">\r\n                                        <el-button\r\n                                            @click=\"downloadById(scope.row.id)\"\r\n                                            type=\"warning\"\r\n                                            icon=\"el-icon-download\"\r\n                                        >下载附件</el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </div>\r\n                    </template>\r\n                </el-table-column>\r\n                <!-- 编号 -->\r\n                <el-table-column align=\"center\" type=\"index\" label=\"编号\" :resizable=\"false\"></el-table-column>\r\n                <!-- 名称 -->\r\n                <el-table-column align=\"center\" prop=\"taskName\" label=\"名称\" :resizable=\"false\"></el-table-column>\r\n                <!-- 开始时间 -->\r\n                <el-table-column align=\"center\" label=\"开始时间\" :resizable=\"false\">\r\n                    <template v-slot:default=\"scope\">\r\n                        <i class=\"el-icon-time\"></i>\r\n                        <span style=\"margin-left: 10px;\">{{scope.row.taskBeginTime}}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <!-- 结束时间 -->\r\n                <el-table-column align=\"center\" label=\"结束时间\" :resizable=\"false\">\r\n                    <template v-slot:default=\"scope\">\r\n                        <i class=\"el-icon-time\"></i>\r\n                        <span style=\"margin-left: 10px;\">{{scope.row.taskEndTime}}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <!-- 完成情况 -->\r\n                <el-table-column align=\"center\" label=\"完成情况（未提交名单见详情）\" :resizable=\"false\">\r\n                    <template v-slot:default=\"scope\">\r\n                        <i\r\n                            v-if=\"scope.row.unDoIds.length == 0\"\r\n                            class=\"el-icon-circle-check\"\r\n                            style=\"color: green; font-size: 15px;\"\r\n                        >已完成</i>\r\n                        <span\r\n                            v-else\r\n                        >{{scope.row.DoneIds.length}} / {{scope.row.unDoIds.length + scope.row.DoneIds.length}}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <!-- 操作 -->\r\n                <el-table-column align=\"center\" label=\"操作 (编辑|删除|下载)\" :resizable=\"false\">\r\n                    <template v-slot:default=\"scope\">\r\n                        <div>\r\n                            <el-button\r\n                                @click=\"changeEditTaskDialog(scope)\"\r\n                                type=\"primary\"\r\n                                icon=\"el-icon-edit\"\r\n                            ></el-button>\r\n                            <el-button\r\n                                @click=\"removeById(scope.row.id)\"\r\n                                type=\"danger\"\r\n                                icon=\"el-icon-delete\"\r\n                            ></el-button>\r\n                            <el-button type=\"warning\" icon=\"el-icon-download\"></el-button>\r\n                        </div>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            // 展开行id\r\n            expandList: [],\r\n            // 获取当前行id\r\n            getRowKeys(row) {\r\n                return row.id;\r\n            },\r\n            // 该scope.row.id任务未完成任务人员名单\r\n            unDoPeop: [\r\n                {\r\n                    id: \"1812011173\",\r\n                    name: \"吴泽华\",\r\n                },\r\n                {\r\n                    id: \"1812011173\",\r\n                    name: \"吴泽华\",\r\n                },\r\n                {\r\n                    id: \"1812011173\",\r\n                    name: \"吴泽华\",\r\n                },\r\n            ],\r\n            // 该scope.row.id任务已完成任务人员名单\r\n            DonePeop: [\r\n                {\r\n                    id: \"1812011173\",\r\n                    name: \"吴泽华\",\r\n                },\r\n            ],\r\n            // 任务列表\r\n            tasklist: [\r\n                {\r\n                    id: 1,\r\n                    taskName: \"信息系统设计课程作业\",\r\n                    taskBeginTime: \"2020-08-01\",\r\n                    taskEndTime: \"2020-09-01\",\r\n                    unDoIds: [1, 4],\r\n                    DoneIds: [2, 3, 5, 6, 7, 8],\r\n                },\r\n                {\r\n                    id: 2,\r\n                    taskName: \"高数\",\r\n                    taskBeginTime: \"2020-08-01\",\r\n                    taskEndTime: \"2020-09-01\",\r\n                    unDoIds: [1, 2, 3, 4],\r\n                    DoneIds: [5, 6, 7, 8],\r\n                },\r\n                {\r\n                    id: 3,\r\n                    taskName: \"软件需求分析报告\",\r\n                    taskBeginTime: \"2020-08-05\",\r\n                    taskEndTime: \"2020-11-10\",\r\n                    unDoIds: [4],\r\n                    DoneIds: [1, 2, 3, 5, 6, 7, 8],\r\n                },\r\n                {\r\n                    id: 5,\r\n                    taskName: \"软件测试报告\",\r\n                    taskBeginTime: \"2020-08-01\",\r\n                    taskEndTime: \"2020-09-03\",\r\n                    unDoIds: [],\r\n                    DoneIds: [1, 2, 3, 4, 5, 6, 7, 8],\r\n                },\r\n                {\r\n                    id: 8,\r\n                    taskName: \"青年大学习\",\r\n                    taskBeginTime: \"2020-08-03\",\r\n                    taskEndTime: \"2020-09-01\",\r\n                    unDoIds: [1, 2, 3, 4],\r\n                    DoneIds: [5, 6, 7, 8],\r\n                },\r\n            ],\r\n            // 查询参数\r\n            queryInfo: {\r\n                query: \"\",\r\n                pagenum: 1,\r\n                pagesize: 10,\r\n            },\r\n            // 控制添加任务对话框显示\r\n            addTaskDialogVisible: false,\r\n            // 控制编辑任务对话框显示\r\n            editTaskDialogVisible: false,\r\n            // 添加任务表单\r\n            addTaskForm: {\r\n                taskname: \"\",\r\n                time: [],\r\n            },\r\n            // 添加任务表单\r\n            editTaskForm: {\r\n                taskname: \"\",\r\n                time: [],\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        this.getTasksList();\r\n    },\r\n    methods: {\r\n        // 折叠面板每次只能展开一行\r\n        expandSelect(row, expandedRows) {\r\n            console.log(row);\r\n            var that = this;\r\n            if (expandedRows.length) {\r\n                that.expandList = [];\r\n                if (row) {\r\n                    that.expandList.push(row.id);\r\n                }\r\n            } else {\r\n                that.expandList = [];\r\n            }\r\n        },\r\n        // 获取任务列表\r\n        async getTasksList() {\r\n            const { data: res } = await this.$http.get(\"users\", {\r\n                params: this.queryInfo,\r\n            });\r\n            if (res.meta.status !== 200) this.$message.error(\"获取失败\");\r\n            // this.tasklist = res.data.users;\r\n            // console.log(res)\r\n        },\r\n        // 根据任务id删除任务\r\n        removeById(id) {\r\n            // 弹框询问是否确认删除\r\n            this.$confirm(\"此操作将永久删除该任务, 是否继续?\", \"提示\", {\r\n                confirmButtonText: \"确定\",\r\n                cancelButtonText: \"取消\",\r\n                type: \"warning\",\r\n            });\r\n        },\r\n        // 添加任务对话框\r\n        changeAddTaskDialog() {\r\n            this.addTaskDialogVisible = !this.addTaskDialogVisible;\r\n        },\r\n        // 编辑任务对话框\r\n        changeEditTaskDialog(scope) {\r\n            // console.log(scope);\r\n            this.editTaskForm.name = scope.row.taskName;\r\n            let tmptime = [];\r\n            tmptime[0] = scope.row.taskBeginTime;\r\n            tmptime[1] = scope.row.taskEndTime;\r\n            this.edtime = tmptime\r\n            console.log(this.editTaskForm.time);\r\n            this.editTaskDialogVisible = !this.editTaskDialogVisible;\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-table th.gutter {\r\n    display: table-cell !important;\r\n}\r\n.infoTable_box {\r\n    margin: auto;\r\n    width: 650px;\r\n    text-align: center;\r\n}\r\n.line {\r\n    text-align: center;\r\n}\r\n.btns {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n.expandTitle {\r\n    letter-spacing: 3px;\r\n}\r\n</style>"]}]}